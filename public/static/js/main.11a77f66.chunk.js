(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(29),c=n.n(i),o=n(10),s=n(5),r=(n(69),n(4)),u=n(21),l=Object(u.b)({name:"auth",initialState:{user:null,token:null,loggedIn:!1,signup:null},reducers:{setSignup:function(e,t){e.signup={success:t.payload.success,email:t.payload.email,message:t.payload.message}},clearSignup:function(e,t){e.signup=null},setAuthenticated:function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.loggedIn=!0},removeAuthenticated:function(e){e.user=null,e.token=null,e.loggedIn=!1}}}),d=l.actions,j=l,b=n(58),p=n.n(b),m=n(18),f=n.n(m),h=n(32),v=Object(u.b)({name:"ui",initialState:{notification:null,notifyTimer:null},reducers:{setNotification:function(e,t){e.notifyTimer&&clearTimeout(e.notifyTimer),e.notifyTimer=t.payload.timer,e.notification={status:t.payload.status,title:t.payload.title,message:t.payload.message}},clearNotification:function(e,t){e.notification=null,e.notifyTimer=null}}}),g=v.actions,O=v,x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return function(n){var a=setTimeout((function(){n(g.clearNotification())}),t);e.timer=a,n(g.setNotification(e))}},y="https://traveling-aback-roundworm.glitch.me",_=n.p+"static/media/logo.6ce24c58.svg",w=n(17),N=n.n(w),S=n(1),k=function(e){var t=Object(s.c)((function(e){return e.auth.loggedIn})),n=Object(s.b)();return Object(S.jsxs)("header",{className:N.a.header,children:[Object(S.jsx)("div",{className:N.a.logo,children:Object(S.jsx)("img",{src:_,alt:"logo"})}),Object(S.jsx)("nav",{className:N.a.nav,children:Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsx)(o.c,{to:"/home",activeClassName:N.a.active,children:"Home"})}),!t&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("li",{children:Object(S.jsx)(o.c,{to:"/login",activeClassName:N.a.active,children:"Login"})}),Object(S.jsx)("li",{children:Object(S.jsx)(o.c,{to:"/signup",activeClassName:N.a.active,children:"Signup"})})]}),t&&Object(S.jsx)("li",{children:Object(S.jsx)("button",{onClick:function(e){n(function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),localStorage.removeItem("user"),t(d.removeAuthenticated());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:N.a.button,children:"Logout"})})]})})]})},I=n(33),C=n.n(I),L=function(e){var t="";"error"===e.status&&(t=C.a.error),"success"===e.status&&(t=C.a.success);var n="".concat(C.a.notification," ").concat(t);return Object(S.jsxs)("section",{className:n,children:[Object(S.jsx)("h2",{children:e.title}),Object(S.jsx)("p",{children:e.message})]})},B=function(e){var t=Object(s.c)((function(e){return e.ui.notification}));return Object(S.jsxs)(S.Fragment,{children:[t&&Object(S.jsx)(L,{status:t.status,title:t.title,message:t.message}),Object(S.jsx)(k,{}),Object(S.jsx)("main",{className:p.a.main,children:e.children})]})},P=function(e){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("h1",{children:"HomePage"})})},T=n(16),V=n(30),E=n(3),M=n(22),z=n(23),F=n.n(z),J=function(e){var t=[e.valid?F.a.valid:F.a.invalid,e.touched?F.a.touched:F.a.untouched].join(" ");return Object(S.jsxs)("div",{className:F.a.input,children:[e.label&&Object(S.jsx)("label",{htmlFor:e.id,children:e.label}),"input"===e.control&&Object(S.jsx)("input",{className:t,type:e.type,id:e.id,required:e.required,value:e.value,placeholder:e.placeholder,onChange:function(t){return e.onChange(e.id,t.target.value,t.target.files)},onBlur:e.onBlur}),"textarea"===e.control&&Object(S.jsx)("textarea",{className:t,id:e.id,rows:e.rows,required:e.required,value:e.value,onChange:function(t){return e.onChange(e.id,t.target.value)},onBlur:e.onBlur})]})},A=(n(75),function(e){return e.link?Object(S.jsx)(o.b,{className:["button","button--".concat(e.design),"button--".concat(e.mode)].join(" "),to:e.link,children:e.children}):Object(S.jsx)("button",{className:["button","button--".concat(e.design),"button--".concat(e.mode)].join(" "),onClick:e.onClick,disabled:e.disabled||e.loading,type:e.type,children:e.loading?"Loading...":e.children})}),D=function(e){return""!==e.trim()},H=function(e){return function(t){var n=!0;return e.min&&(n=n&&t.trim().length>=e.min),e.max&&(n=n&&t.trim().length<=e.max),n}},Y=function(e){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)},q=(n(76),function(e){return Object(S.jsx)("section",{className:"auth-form",children:e.children})}),Q=void 0,R=function(e){var t=Object(a.useState)({inputs:{email:{value:"",valid:!1,touched:!1,validators:[D,Y]},password:{value:"",valid:!1,touched:!1,validators:[D,H({min:5})]}},formIsValid:!1}),n=Object(M.a)(t,2),i=n[0],c=n[1],o=Object(s.c)((function(e){return e.auth.signup})),u=Object(s.c)((function(e){return e.auth.loggedIn})),l=Object(s.b)(),j=Object(r.g)();Object(a.useEffect)((function(){if(u&&j.replace("/"),o&&o.success){var e=o.email;c((function(t){return{inputs:Object(E.a)(Object(E.a)({},t.inputs),{},{email:Object(E.a)(Object(E.a)({},t.inputs.email),{},{value:e})}),formIsValid:t.formIsValid}})),l(d.clearSignup())}}),[u,l,j,o]);var b=function(e,t){var n;console.log("onLoginHandler..."),e.preventDefault(),l((n=t,function(){var e=Object(h.a)(f.a.mark((function e(t){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x({status:"pending",title:"Login",message:"Verifying.."})),e.prev=1,e.next=4,fetch(y+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:if(200===(a=e.sent).status){e.next=7;break}throw new Error("Authentication failed");case 7:return e.next=9,a.json();case 9:i=e.sent,localStorage.setItem("token",i.token),localStorage.setItem("user",JSON.stringify(i.user)),t(d.setAuthenticated(i)),t(x({status:"success",title:"Login success.",message:""})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t(x({status:"error",title:"Login failed",message:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()))},p=function(e,t){c((function(n){var a,i=!0,c=Object(V.a)(n.inputs[e].validators);try{for(c.s();!(a=c.n()).done;){var o=a.value;i=i&&o(t)}}catch(l){c.e(l)}finally{c.f()}var s=Object(E.a)(Object(E.a)({},n.inputs),{},Object(T.a)({},e,Object(E.a)(Object(E.a)({},n.inputs[e]),{},{valid:i,value:t}))),r=!0;for(var u in s)r=r&&s[u].valid;return{inputs:s,formIsValid:r}}))},m=function(e){c((function(t){return{inputs:Object(E.a)(Object(E.a)({},t.inputs),{},Object(T.a)({},e,Object(E.a)(Object(E.a)({},t.inputs[e]),{},{touched:!0}))),formIsValid:t.formIsValid}}))};return Object(S.jsx)(q,{children:Object(S.jsxs)("form",{onSubmit:function(e){return b(e,{email:i.inputs.email.value.toLowerCase(),password:i.inputs.password.value})},children:[Object(S.jsx)(J,{id:"email",label:"Your E-Mail",type:"email",control:"input",onChange:p,onBlur:m.bind(Q,"email"),value:i.inputs.email.value,valid:i.inputs.email.valid,touched:i.inputs.email.touched}),Object(S.jsx)(J,{id:"password",label:"Password",type:"password",control:"input",onChange:p,onBlur:m.bind(Q,"password"),value:i.inputs.password.value,valid:i.inputs.password.valid,touched:i.inputs.password.touched}),Object(S.jsx)(A,{design:"raised",type:"submit",loading:e.loading,children:"Login"})]})})},U=function(e){var t=Object(a.useState)({inputs:{email:{value:"",valid:!1,touched:!1,validators:[D,Y]},password:{value:"",valid:!1,touched:!1,validators:[D,H({min:5})]},name:{value:"",valid:!1,touched:!1,validators:[D]}},formIsValid:!1}),n=Object(M.a)(t,2),i=n[0],c=n[1],o=Object(r.g)(),u=Object(s.c)((function(e){return e.auth.signup}));Object(a.useEffect)((function(){u&&!0===u.success&&(console.log("redirect to Login page..."),o.replace("/login"))}),[u,o]);var l=Object(s.b)(),j=function(e,t){console.log("onSignupHandler..."),e.preventDefault();var n,a=t.inputs,i=a.email,c=a.name,o=a.password;l((n={email:i.value,name:c.value,password:o.value},function(){var e=Object(h.a)(f.a.mark((function e(t){var a,i,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x({status:"pending",title:"Signup",message:"Pending.."})),e.prev=1,e.next=4,fetch(y+"/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return a=e.sent,e.next=7,a.json();case 7:if(i=e.sent,a.ok){e.next=12;break}throw c="Signup failed.",i.data&&(c=i.data[0].msg),new Error(c);case 12:t(d.setSignup({success:!0,email:i.user.email,message:""})),t(x({status:"success",title:"Signup successfully.",message:"Please, login."})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t(x({status:"error",title:"Signup failed",message:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()))},b=function(e,t){c((function(n){var a,i=!0,c=Object(V.a)(n.inputs[e].validators);try{for(c.s();!(a=c.n()).done;){var o=a.value;i=i&&o(t)}}catch(l){c.e(l)}finally{c.f()}var s=Object(E.a)(Object(E.a)({},n.inputs),{},Object(T.a)({},e,Object(E.a)(Object(E.a)({},n.inputs[e]),{},{valid:i,value:t}))),r=!0;for(var u in s)r=r&&s[u].valid;return{inputs:s,formIsValid:r}}))},p=function(e){c((function(t){return{inputs:Object(E.a)(Object(E.a)({},t.inputs),{},Object(T.a)({},e,Object(E.a)(Object(E.a)({},t.inputs[e]),{},{touched:!0}))),formIsValid:t.formIsValid}}))};return Object(S.jsx)(q,{children:Object(S.jsxs)("form",{onSubmit:function(e){return j(e,i)},children:[Object(S.jsx)(J,{id:"email",label:"Your E-Mail",type:"email",control:"input",onChange:b,onBlur:p.bind(null,"email"),value:i.inputs.email.value,valid:i.inputs.email.valid,touched:i.inputs.email.touched}),Object(S.jsx)(J,{id:"name",label:"Your Name",type:"text",control:"input",onChange:b,onBlur:p.bind(null,"name"),value:i.inputs.name.value,valid:i.inputs.name.valid,touched:i.inputs.name.touched}),Object(S.jsx)(J,{id:"password",label:"Password",type:"password",control:"input",onChange:b,onBlur:p.bind(null,"password"),value:i.inputs.password.value,valid:i.inputs.password.valid,touched:i.inputs.password.touched}),Object(S.jsx)(A,{design:"raised",type:"submit",loading:e.loading,children:"Signup"})]})})},$=n(59),G=n.n($),K="Game-1",W=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(""),i=Object(M.a)(n,2),c=i[0];i[1];return Object(a.useEffect)((function(){t.current=G()("".concat(y,"/").concat(K));var e=t.current;return e.on("connect",(function(){console.log("Connected to "+K),e.emit("make-room",{name:"abc"})})),e.on("roomList",(function(e){console.log(e)})),e.on("roomData",(function(e){console.log(e)})),function(){console.log("Closing the socket..."),e.close()}}),[]),Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Socket.io Page"}),Object(S.jsx)("p",{children:c})]})},X=function(){return Object(S.jsx)("div",{className:"centered",children:Object(S.jsx)("p",{children:"Page not found!"})})};n(107);var Z=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){var t=localStorage.getItem("token"),n=localStorage.getItem("user");console.log(t,n),t&&e(d.setAuthenticated({token:t,user:JSON.parse(n)}))}),[e]),Object(S.jsx)(B,{children:Object(S.jsxs)(r.d,{children:[Object(S.jsx)(r.b,{path:"/",exact:!0,children:Object(S.jsx)(r.a,{to:"/home"})}),Object(S.jsx)(r.b,{path:"/home",children:Object(S.jsx)(P,{})}),Object(S.jsx)(r.b,{path:"/login",children:Object(S.jsx)(R,{})}),Object(S.jsx)(r.b,{path:"/signup",children:Object(S.jsx)(U,{})}),Object(S.jsx)(r.b,{path:"/socketio",children:Object(S.jsx)(W,{})}),Object(S.jsx)(r.b,{path:"*",children:Object(S.jsx)(X,{})})]})})},ee=Object(u.a)({reducer:{auth:j.reducer,ui:O.reducer}}),te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,109)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),c(e),o(e)}))};c.a.render(Object(S.jsx)(o.a,{children:Object(S.jsx)(s.a,{store:ee,children:Object(S.jsx)(Z,{})})}),document.getElementById("root")),te()},17:function(e,t,n){e.exports={header:"MainNav_header__lYJ4I",logo:"MainNav_logo__3MC6x",nav:"MainNav_nav__vgPYM",button:"MainNav_button__mOB_u",active:"MainNav_active__cHrBo"}},23:function(e,t,n){e.exports={input:"Input_input__37414",touched:"Input_touched__UQh7_",invalid:"Input_invalid__3Rmyd"}},33:function(e,t,n){e.exports={notification:"Notification_notification__225hK",error:"Notification_error__3IU-O",success:"Notification_success__1sQb2"}},58:function(e,t,n){e.exports={main:"Layout_main__jDtPr"}},69:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.11a77f66.chunk.js.map